# GLOBAL variables
ubuntu_baseurl: &ubuntu_baseurl http://mirrors.aliyun.com/ubuntu

fuel_release_match:
   version: $openstack_version
   operating_system: Ubuntu

# Main is a required parameter which defines what repository will be used
# for images creation and that mirror should contain all packages for minimal
# system creation.
repos:
    -   &ubuntu
        main: true
        name: "ubuntu"
        uri: *ubuntu_baseurl
        suite: "xenial"
        section: [main, multiverse, restricted, universe]
        type: "deb"
        priority: null

    -   &ubuntu_updates
        name: "ubuntu-updates"
        uri: *ubuntu_baseurl
        suite: "xenial-updates"
        section: [main, multiverse, restricted, universe]
        type: "deb"
        priority: 3

    -   &ubuntu_security
        name: "ubuntu-security"
        uri: *ubuntu_baseurl
        suite: "xenial-security"
        section: [main, multiverse, restricted, universe]
        type: "deb"
        priority: 3

    -   &mos
        name: "mos"
        uri: "http://localhost:8080/ubuntu/x86_64"
        suite: "mos$mos_version"
        section: [main, restricted]
        type: "deb"
        priority: 1050

    -   &docker
        name: "docker"
        uri: "http://mirrors.aliyun.com/docker-ce/linux/ubuntu"
        suite: "xenial"
        section: [stable]
        type: "deb"
        priority: 1100

# Packages are required to build bootstrap images for a system.
# The mirror should contiain such packages in addition to local mirror.
packages: &packages
  - name: nailgun-agent
  - name: iputils-arping
  - name: ruby-shadow
  - name: lvm2
  - name: vim
  - name: linux-image-generic-lts-xenial
  - name: linux-headers-generic-lts-xenial
  - name: linux-firmware-nonfree
  - name: puppet
  - name: ntpdate
  - name: python-amqp
  - name: debconf-utils
  - name: bridge-utils
  - name: squashfs-tools
  - name: bash-completion
  - name: sysfsutils
  - name: hpsa-dkms
  - name: mc
  - name: ifenslave
  - name: ubuntu-standard
  - name: ubuntu-minimal
  - name: nailgun-mcagents
  - name: i40e-dkms
  - name: curl
  - name: acl
  - name: hwloc
  - name: openssh-server
  - name: openssh-client
  - name: network-checker
  - name: linux-headers-generic
  - name: linux-firmware
  - name: grub-pc
  - name: ruby-openstack
  - name: ruby-stomp
  - name: irqbalance
  - name: ruby-ipaddress
  - name: mcollective
  - name: live-boot-initramfs-tools
  - name: ntp
  - name: cloud-init
  - name: fuel-agent
  - name: wget
  - name: apt-transport-https
  - name: daemonize
  - name: ruby-json
  - name: ruby-augeas
  - name: openssl
  - name: ca-certificates
  - name: docker-ce
  - name: live-boot
  - name: xz-utils 
  - name: msmtp-mta
  - name: multipath-tools-boot 
  - name: multipath-tools  

groups:
    ubuntu:
        - *ubuntu
        - *ubuntu_updates
        - *ubuntu_security
        - *mos
        - *docker

osnames:
    mos: ubuntu

requirements:
    ubuntu: 
      packages: *packages
