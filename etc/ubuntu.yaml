# GLOBAL variables
ubuntu_baseurl: &ubuntu_baseurl http://mirrors.aliyun.com/ubuntu
mos_baseurl: &mos_baseurl http://mirror.fuel-infra.org/mos-repos/ubuntu/$mos_version

fuel_release_match:
   version: $openstack_version
   operating_system: Ubuntu

# Main is a required parameter which defines what repository will be used
# for images creation and that mirror should contain all packages for minimal
# system creation.
repos:
    -   &ubuntu
        main: true
        name: "ubuntu"
        uri: *ubuntu_baseurl
        suite: "xenial"
        section: [main, multiverse, restricted, universe]
        type: "deb"
        priority: null

    -   &ubuntu_updates
        name: "ubuntu-updates"
        uri: *ubuntu_baseurl
        suite: "xenial-updates"
        section: [main, multiverse, restricted, universe]
        type: "deb"
        priority: null

    -   &ubuntu_security
        name: "ubuntu-security"
        uri: *ubuntu_baseurl
        suite: "xenial-security"
        section: [main, multiverse, restricted, universe]
        type: "deb"
        priority: null

    -   &mos
        name: "mos"
        uri: "http://localhost:8080/ubuntu/x86_64"
        suite: "mos$mos_version"
        section: [main, restricted]
        type: "deb"
        priority: 1050

    -   &mos_updates
        name: "mos-updates"
        uri: *mos_baseurl
        suite: "mos$mos_version-updates"
        section: [main, restricted]
        type: "deb"
        priority: 1050

    -   &mos_security
        name: "mos-security"
        uri: *mos_baseurl
        suite: "mos$mos_version-security"
        section: [main, restricted]
        type: "deb"
        priority: 1050

    -   &mos_holdback
        name: "mos-holdback"
        uri: *mos_baseurl
        suite: "mos$mos_version-holdback"
        section: [main, restricted]
        type: "deb"
        priority: 1100

    -   &docker
        name: "docker"
        uri: "https://download.docker.com/linux/ubuntu"
        suite: "xenial"
        section: [stable]
        type: "deb"
        priority: 1100

# Packages are required to build bootstrap images for a system.
# The mirror should contiain such packages in addition to local mirror.
packages: &packages
  - name: grep
  - name: findutils
  - name: build-essential
  - name: nailgun-agent
  - name: ruby-shadow
  - name: lvm2
  - name: vim
  - name: linux-image-generic-lts-xenial
  - name: puppet
  - name: xz-utils
  - name: gdisk
  - name: ntpdate
  - name: ruby-netaddr
  - name: linux-firmware-nonfree
  - name: python-amqp
  - name: debconf-utils
  - name: bridge-utils
  - name: squashfs-tools
  - name: openssh-server
  - name: bash-completion
  - name: sysfsutils
  - name: hpsa-dkms
  - name: mc
  - name: ifenslave
  - name: ubuntu-standard
  - name: ubuntu-minimal
  - name: nailgun-mcagents
  - name: live-boot
  - name: i40e-dkms
  - name: bsdmainutils
  - name: msmtp-mta
  - name: curl
  - name: acl
  - name: mdadm
  - name: multipath-tools-boot
  - name: multipath-tools
  - name: hwloc
  - name: openssh-client
  - name: linux-headers-generic-lts-xenial
  - name: network-checker
  - name: linux-headers-generic
  - name: linux-firmware
  - name: grub-pc
  - name: ruby-openstack
  - name: ruby-stomp
  - name: irqbalance
  - name: ruby-ipaddress
  - name: mcollective
  - name: live-boot-initramfs-tools
  - name: ntp
  - name: vlan
  - name: anacron
  - name: cloud-init
  - name: fuel-agent
  - name: telnet
  - name: iputils-arping
  - name: wget
  - name: uuid-runtime
  - name: apt-transport-https
  - name: rsyslog-gnutls
  - name: daemonize
  - name: virt-what
  - name: ruby-json
  - name: ruby-augeas
  - name: docker-ce
  - name: libsasl2-2
  - name: libcurl3-gnutls
  - name: libgssapi-krb5-2
  - name: libk5crypto3
  - name: libkrb5support0
  - name: libasn1-8-heimdal
  - name: libhcrypto4-heimdal
  - name: libwind0-heimdal
  - name: openssl
  - name: librtmp1
  - name: libkrb5-26-heimdal
  - name: libroken18-heimdal
  - name: libkrb5-3
  - name: libkeyutils1
  - name: libhx509-5-heimdal
  - name: libgssapi3-heimdal
  - name: libheimbase1-heimdal
  - name: libheimntlm0-heimdal
  - name: libsasl2-modules-db
  - name: libldap-2.4-2



groups:
    ubuntu:
        - *ubuntu
        - *ubuntu_updates
        - *ubuntu_security
        - *mos
        - *mos_updates
        - *mos_security
        - *mos_holdback
        - *docker
    base:
        - *ubuntu


#inheritance:
#    ubuntu: mos

osnames:
    mos: ubuntu

requirements:
    base:
      packages: *packages
    ubuntu: 
      packages: *packages
